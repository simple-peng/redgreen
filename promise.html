<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>light</title>

  <style type="text/css">
  div{
    background: grey;
    display:inline-block;
    margin:30px;
    width:100px;
    height:100px;
    border-radius: 50px;
  }
  .red.light{
    background: red;
  }
  .yellow.light{
    background: yellow;
  }
  .green.light{
    background: green;
  }
  </style>
</head>

<body>
  <p>一个路口的红绿灯,会按照绿灯亮10s,黄灯亮2秒，红灯亮5秒的顺序无限循环，请编写js代码来控制这个红绿灯</p><br/>
  <!-- <div class="ct"> -->
    <div class="green"></div>
    <div class="yellow"></div>
    <div class="red"></div>
  <!-- </div> -->
  <script type="text/javascript">
    function green(){
      let lights = document.querySelectorAll("div")
      let green = document.getElementsByClassName("green")[0]
      for(let i = 0;i < 3;i++){
        lights[i].classList.remove("light")
      }
      green.classList.add("light")
    }
    function yellow(){
      let lights = document.querySelectorAll("div")
      let yellow = document.getElementsByClassName("yellow")[0]
      for(let i = 0;i < 3;i++){
        lights[i].classList.remove("light")
      }
      yellow.classList.add("light")
    }
    function red(){
      let lights = document.querySelectorAll("div")
      let red = document.getElementsByClassName("red")[0]
      for(let i = 0;i < 3;i++){
        lights[i].classList.remove("light")
      }
      red.classList.add("light")
    }

    // function go(){
    //   green()
    //   new Promise((resolve,reject)=>{
    //     setTimeout(resolve,1000)
    //   }).then(()=>{
    //     yellow()
    //     return new Promise((resolve,reject)=>{
    //       setTimeout(resolve,1000)
    //     }).then(()=>{
    //       red()
    //       return new Promise((resolve,reject)=>{
    //         setTimeout(resolve,1000)
    //       }).then(()=>{
    //         go()
    //       })
    //     })
    //   })
    // }

    // function go(){
    //   green()
    //   new Promise((resolve,reject)=>{
    //     setTimeout(resolve,1000)
    //   }).then(()=>{
    //     yellow()
    //     new Promise((resolve,reject)=>{
    //       setTimeout(resolve,1000)
    //     }).then(()=>{
    //       red()
    //       new Promise((resolve,reject)=>{
    //         setTimeout(resolve,1000)
    //       }).then(()=>{
    //         go()
    //       })
    //     })
    //   })
    // }


    function go(){
      green()
      sleep(1000).then(()=>{
        yellow()
        return sleep(200)
      }).then(()=>{
          red()
          return sleep(500)
      }).then(()=>{
        go()
      })
    }

    function sleep(t){
      return new Promise((resolve,reject)=>{
        setTimeout(resolve,t)
      })
    }
    
    // go()
  </script>
</body>
</html>